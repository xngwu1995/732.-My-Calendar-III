class Solution:
    def numTriplets(self, nums1: List[int], nums2: List[int]) -> int:
        d1 = defaultdict(int)
        d2 = defaultdict(int)
        for i in nums1:
            d1[i*i] += 1
        for i in nums2:
            d2[i*i] += 1
        
        res = 0
        n = len(nums1)
        m = len(nums2)
        for i in range(n-1):
            for j in range(i+1,n):
                p = nums1[i] * nums1[j]
                res += d2[p]
        for i in range(m-1):
            for j in range(i+1,m):
                p = nums2[i] * nums2[j]
                res += d1[p]
        return res
